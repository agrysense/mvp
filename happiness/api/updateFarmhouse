var farmhouseManager = require("../entities/farmhouses/farmhouseManager");
var log = require("log"); log.setLevel("info");

var params = request.parameters;
if (params.body) {
    params = JSON.parse(params.body);
}

var customParams = JSON.parse(JSON.stringify(params));

try {
    var fhm1 = new farmhouseManager.FarmhouseManager();
    var farmhouse1 = null;
    try {
    	farmhouse1 = fhm1.getFarmhouse(params);
    } catch(exception) {
    }
    if (farmhouse1 != null && farmhouse1.key != null) {
        customParams.key = farmhouse1.key;
    }
	return fhm1.updateFarmhouse(customParams);
}catch(exception) {
    return exception;
}