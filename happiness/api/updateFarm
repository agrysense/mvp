var farmManager = require("../entities/farms/farmManager");
var log = require("log"); log.setLevel("info");

var params = request.parameters;
if (params.body) {
    params = JSON.parse(params.body);
}

var customParams = JSON.parse(JSON.stringify(params));

try {
    var fm1 = new farmManager.FarmManager();
    var farm1 = null;
    try {
    	farm1 = fm1.getFarm(params);
    } catch(exception) {
    }
    if (farm1 != null && farm1.key != null) {
        customParams.key = farm1.key;
    }
	return fm1.updateFarm(customParams);
}catch(exception) {
    return exception;
}